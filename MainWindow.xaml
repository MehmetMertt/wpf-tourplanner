<Window
    x:Class="tour_planner.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:gmaps="clr-namespace:GMap.NET.WindowsPresentation;assembly=GMap.NET.WindowsPresentation"
    xmlns:local="clr-namespace:tour_planner"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="clr-namespace:tour_planner.View"
    Title="Routenplanner"
    Width="800"
    Height="450"
    MinWidth="800"
    MinHeight="450"
    AllowsTransparency="True"
    ResizeMode="CanResizeWithGrip"
    WindowStyle="None"
    mc:Ignorable="d">

    <Window.CommandBindings>
        <CommandBinding
            CanExecute="CommandBinding_CanExecute_1"
            Command="{x:Static SystemCommands.CloseWindowCommand}"
            Executed="CommandBinding_Executed_1" />
        <CommandBinding
            CanExecute="CommandBinding_CanExecute_1"
            Command="{x:Static SystemCommands.MaximizeWindowCommand}"
            Executed="CommandBinding_Executed_2" />
        <CommandBinding
            CanExecute="CommandBinding_CanExecute_1"
            Command="{x:Static SystemCommands.MinimizeWindowCommand}"
            Executed="CommandBinding_Executed_3" />
    </Window.CommandBindings>

    <!--  Root Layout  -->
    <DockPanel Background="{StaticResource PrimaryBrush}">

        <!--  Custom Title Bar  -->
        <Grid
            Height="30"
            Margin="10,0,10,0"
            Background="{StaticResource PrimaryBrush}"
            DockPanel.Dock="Top"
            MouseLeftButtonDown="DragWindow">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="8*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>
            <TextBlock
                Grid.Column="0"
                VerticalAlignment="Center"
                FontSize="15px"
                Foreground="White"
                Text="Tourplanner" />
            <StackPanel
                Grid.Column="1"
                FlowDirection="RightToLeft"
                Orientation="Horizontal">
                <Button
                    Width="25"
                    Height="25"
                    Command="{x:Static SystemCommands.CloseWindowCommand}"
                    Content="X" />
                <Button
                    Width="25"
                    Height="25"
                    Command="{x:Static SystemCommands.MaximizeWindowCommand}"
                    Content="[]" />
                <Button
                    Width="25"
                    Height="25"
                    Command="{x:Static SystemCommands.MinimizeWindowCommand}"
                    Content="-" />
            </StackPanel>

        </Grid>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="25*" />
                <ColumnDefinition Width="0*"/>
                <ColumnDefinition Width="7*"/>
                <ColumnDefinition Width="128*" />
            </Grid.ColumnDefinitions>

            <!--  Sidebar  -->
            <views:Routes Grid.ColumnSpan="3" />


            <!--  Main Content Area  -->
            <StackPanel Grid.Column="3" Margin="5,5,5,5">
                <Border
                    Height="200"
                    Margin="5"
                    Background="LightGray">
                    <gmaps:GMapControl
                        x:Name="mapView"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Loaded="mapView_Loaded" />
                </Border>

                <TextBlock Text="Details" FontSize="18" FontWeight="Bold" Foreground="White"/>
                <TextBlock Text="Name:" Foreground="White" />
                <TextBox Text="{Binding SelectedTour.Name, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock Text="Date:" Foreground="White"/>
                <TextBox PreviewTextInput="RegexDate_PreviewTextInput" Text="{Binding SelectedTour.Date, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock Text="Duration:" Foreground="White"/>
                <TextBox PreviewTextInput="RegexDuration_PreviewTextInput" Text="{Binding SelectedTour.TotalDuration, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock Text="Distance:" Foreground="White"/>
                <TextBox PreviewTextInput="RegexDistance_PreviewTextInput" Text="{Binding SelectedTour.TotalDistance, UpdateSourceTrigger=PropertyChanged}"/>
                <!--
                <TextBlock Text="Start:" Foreground="White"/>
                <TextBox Text="{Binding SelectedTour.StartLocation, UpdateSourceTrigger=PropertyChanged}"/>

                <TextBlock Text="End:" Foreground="White"/>
                <TextBox Text="{Binding SelectedTour.EndLocation, UpdateSourceTrigger=PropertyChanged}"/>
                
                <TextBlock Text="Comment:" Foreground="White"/>
                <TextBox Text="{Binding SelectedTour.Description, UpdateSourceTrigger=PropertyChanged}" AcceptsReturn="True" Height="60"/>
                -->
                <TextBlock
                    Margin="5"
                    FontWeight="Bold"
                    Text="Tour Data" 
                    Foreground="White"/>
                <DataGrid
                    Name="datagrid"
                    AutoGenerateColumns="False"
                    HeadersVisibility="Column"
                    ItemsSource="{Binding Tours}"
                    SelectedItem="{Binding SelectedTour, Mode=TwoWay}">
                    <DataGrid.Columns>
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding Date}"
                            Header="Date" />
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding TotalDuration}"
                            Header="Duration" />
                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding TotalDistance}"
                            Header="Distance" />
                    </DataGrid.Columns>
                </DataGrid>
            </StackPanel>
        </Grid>
    </DockPanel>
</Window>
